---
title: "6.1 时间序列成分"
output: html_notebook
---

Now, click the **Run** button on the chunk toolbar to [execute](https://www.jetbrains.com/help/pycharm/r-markdown.html#run-r-code) the chunk code. The result should be placed under the chunk.
Click the **Knit and Open Document** to build and preview an output.
6.1 时间序列成分
假设一条时间序列是由多种成分相加得来，那么它可以写为如下形式：
$$
y_{t} = S_{t} + T_{t} + R_t,
$$
在上式中$y_{t}$表示时间序列数据，$S_{t}$表示季节项，$T_{t}$表示趋势-周期项，$R_t$表示残差项。此外，时间序列也可以写成相乘的形式：
$$
y_{t} = S_{t} \times T_{t} \times R_t.
$$
如果季节性波动的幅度或者趋势周期项的波动不随时间序列水平的变化而变化，那么加法模型是最为合适的。当季节项或趋势周期项的变化与时间序列的水平成比例时，则乘法模型更为合适。在经济时间序列中，乘法模型较为常用。

使用乘法分解的一种替代方法是：首先对数据进行变换，直到时间序列随时间的波动趋于稳定，然后再使用加法分解。显然，采用对数变换的加法模型，等价于乘法模型：
$y_{t} = S_{t} \times T_{t} \times R_t \quad\text{等价于}\quad
\log y_{t} = \log S_{t} + \log T_{t} + \log R_t.$

# 电子设备生产
在本章中我们将会讲到获取时间序列成分
$S_{t}$,$T_{t}$和$R_{t}$的几种方法，但是在此之前，我们先来看一个例子。我们将分解如图 6.1 所示的电子设备新订单数量时间序列。数据显示了欧元区（16个国家）的电子设备（计算机、电子和光学产品）的新订单数量。数据已通过工作日调整并进行了正态化处理，使得100的值对应于2005。

![电子设备订单量：趋势-周期成分（红色）和原始数据（灰色）。](https://otexts.com/fppcn/fpp_files/figure-html/elecequip-trend-1.png)
图 6.1: 电子设备订单量：趋势-周期成分（红色）和原始数据（灰色）。

如图 6.1 中的红色线表示趋势周期项$T_{t}$，灰色线表示原始数据$Y_{t}$。趋势周期项展示了序列的整体动态，忽略了季节性变动和其它随机波动。

图 6.2 展示了本条时间序列的加法分解。本例中运用了STL方法来估计时间序列的成分，我们将在章节 6.6 中详细讲解STL方法。

![电气设备订单（上）及其三个可加成分。](https://otexts.com/fppcn/fpp_files/figure-html/elecequip-stl-1.png)
图 6.2: 电气设备订单（上）及其三个可加成分。

图 6.2 中的底部三栏分别为三种成分，将三种成分加和之后可以得到图中顶部的时间序列。从图中可以看出，季节项随时间变化非常缓慢，因此任意相邻的两年有着非常相似的模式，但是相隔很远的年份可能会有不同的季节性模式。第二栏所示的残差项是时间序列数据中减去季节项和趋势周期项所剩下的部分。

每一栏右侧的灰柱表示了各个成分的相对大小。四个灰柱表示相同的大小，但是因为每个图的尺度不同，灰柱的大小也会不同。第二栏的灰柱较大，它表示残差项的变化相比于原数据的波动变化较小，大约为其四分之一的大小。如果我们缩小底部三栏的大小直到他们的灰柱大小与顶部灰柱的大小相同，那么这四个图的尺度都会是相同的。

季节调整数据
如果将季节项从原始数据中剔除，可以得到经过“季节调整”后的数据。对于加法分解，季节调整数据的表达式为：$y_{t}-S_{t}$，对于乘法分解，季节调整数据可由$y_{t}/S_{t}$获得。

图 6.3 展示了季节调整后的电子设备订单数据。

![季节调整后的电子设备订单数(蓝色)及原始数据(灰色)。](https://otexts.com/fppcn/fpp_files/figure-html/elecequip-sa-1.png)
图 6.3: 季节调整后的电子设备订单数(蓝色)及原始数据(灰色)。

如果我们关心的不是季节性的数据波动，那么季节调整后的时间序列就会十分有用。例如，每月的失业率会受到季节性因素的影响，在学生离校的时期，当月失业率会显著上升，但这种失业率并不是由于经济衰退而导致的。因此，当研究经济和失业率的关系时，应该将失业率进行季节调整。大多数研究实业数据的经济分析学者对非季节性变化更感兴趣。因此，就业数据（和很多其他的经济数据）通常会经过季节调整。

经过季节调整后的时间序列既包含残差项也包含趋势周期项。因此，它们不太“平滑”，其“下转折”和“上转折”可能会有误导性。如果我们的目的是找到序列的转折点并解释方向的变化，那么相比于用季节调整后的数据，用趋势-周期项会更合适。